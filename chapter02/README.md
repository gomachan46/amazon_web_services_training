# 仮想サーバの作成(EC2基本編)

## 2.1 AmazonEC2の概要

### EC2

仮想サーバを必要なときに必要なだけ調達でき、使った分だけ料金を支払えばよいサービス

スケールアップ、スケールアウトを柔軟に変えていける

### インスタンスタイプ

サーバスペックを定義するもの。

サーバの利用料金はインスタンスタイプごとの時間単価x利用時間となる。

#### T2インスタンス

T2インスタンスはバーストする機能を持っている。


### AMI(Amazon Machine Image)

仮想サーバの起動に必要な情報が入っている

稼働当初からあるインスタンスストアと、後発のEBSがある。

現在はEBSが主流

#### AMIの仮想化形式

* 準仮想化(PV)
  * 開始当初からある
* ハードウェア仮想マシン(HVM)
  * 2013年~。現在の主流
  
今はHVMをAWSも使うことを推奨している

### EC2のストレージ

#### EBS(Elastic Block Store)

ボリュームという単位で表現されるストレージ。EBSボリュームと呼ばれる。

|タイプ|ハードウェア|容量|IOPSのパフォーマンス|用途|
|General Purpose(GP2)|SSD|1GB~16TB|1GBごとに3IOPS得られる|ルートボリュームや中小規模のDB|
|プロビジョンドIOPS|10GB~16TB|IOPSは作成時に指定。IOPSと容量には30:1の制約がある|高負荷なDB|
|Magnetic|磁気ディスク|1GB~1TB|平均100IOPS、最大数百IOPSまでバースト|読書速度やアクセス頻度が低い場合|

#### インスタンスストア

他のインスタンスへ付け替え不可能な、インスタンスを起動している間のみ利用できるストア

用途としてはtmpディレクトリの感覚

ただ、直接インスタンスにつながっているためEBSよりも高いパフォーマンスが期待できる

|ストレージタイプ|永続性|耐久性|パフォーマンス|用途|費用|
|EBS|高い|99.5~99.999%|ランダムアクセスに強い|OSやDBなどの永続性、耐久性が必要なストレージ|有料|
|インスタンスストア|低い|EBSより低い|シーケンシャルアクセスに強い|失われても問題がないストレージ|無料|
